import "res://dialogs/quiz.dialogue" as quiz
~ battle_dialogue
Ber√§ttare: {{GlobalBattle.prompt}}

{{GlobalBattle.battle_name}}: {{GlobalBattle.start_dialog}}
=>< battle_state_machine
{{GlobalBattle.battle_name}}: Ja det gick ju som det gick.
Sten: [[Loser.|Noob.|Kan du inte b√§ttre?]]
=> battle_dialogue
=> END

~ battle_state_machine
while GlobalPlayer.hp > 0 and GlobalBattle.hp > 0:
	
	=>< player_round
	{{GlobalBattle.battle_name}}: {{GlobalBattle.hp}} hp
	=>< enemy_round
	Sten: {{GlobalPlayer.hp}} hp
	
=> END

~ player_round
- Smocka
	{{GlobalBattle.battle_name}}: Ouch!
	if GlobalPlayer.smock - GlobalBattle.smock > 0:
		set GlobalBattle.hp -= GlobalPlayer.smock - GlobalBattle.smock
	else:
		Ber√§ttare: {{GlobalBattle.battle_name}} √§r f√∂r stark f√∂r dig...
	
- Slisk
	Sten: Tjena kexet, st√•r du h√§r och smular?
	{{GlobalBattle.battle_name}}: Du √§r inte s√• dum du heller üòò

- Snille
	=>< quiz/quiz
=> END

~ enemy_round
do GlobalBattle.select_random_attack()
if GlobalBattle.random_attack < 0.33:
	{{GlobalBattle.battle_name}}: Smocka!!
	if GlobalPlayer.hp - GlobalBattle.smock > 0:
		set GlobalPlayer.hp = GlobalPlayer.hp - GlobalBattle.smock
	else:
		Ber√§ttare: {{GlobalBattle.battle_name}} √§r [[inte tillr√§ckligt stark|vek|en mes]]...
elif GlobalBattle.random_attack < 0.66:
	{{GlobalBattle.battle_name}}: Snille!
	do GlobalBattle.select_random_attack()
	if GlobalBattle.random_attack < 0.33:
		if  GlobalBattle.brains - GlobalPlayer.brains / 2 > 0
			set GlobalPlayer.hp -= GlobalBattle.brains - GlobalPlayer.brains / 2 
		else:
			Ber√§ttare: {{GlobalBattle.battle_name}} √§r [[inte tillr√§ckligt smart|dum i huvudet|svagt beg√•vad]]...
else:
	{{GlobalBattle.battle_name}}: Slisk!
	do GlobalBattle.select_random_attack()
	if GlobalBattle.random_attack < 0.33: 
		set GlobalPlayer.hp -= GlobalBattle.slisk - GlobalPlayer.slisk / 2
=> END